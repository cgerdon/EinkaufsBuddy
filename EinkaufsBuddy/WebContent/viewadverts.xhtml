<ui:composition template="template/mastersideboxadverts.xhtml"
 	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions">
    
<ui:define name="content">

        <h:form>  
	
		<p:remoteCommand action="#{advert.showAllOhneEvent}" autoRun="true" asnc="true" update="tabviewupdate"/>

			<p:tabView id="tabviewupdate" >
				<p:ajax event="tabChange" listener="#{advert.showAll}" update="tabviewupdate"/>
				
				<p:tab title="Eigene Inserate">
							    	
				    <ui:repeat var="ads" value="#{advert.alladverts}">
				
					    <p:fieldset legend="Entwurf: #{ads.datum} - #{ads.zeitpunkt}" rendered="#{ads.ad_status == 0 and ads.ad_acc == 0 and ads.ad_buyerID == 0 and ads.ad_rate == 0}">
					        <h:panelGrid columns="3" cellpadding="5" >
					            <h:graphicImage value="resources/images/sample.jpg" alt="image" />
								
									<h:panelGrid columns="2" border="1">
										<h:panelGroup>
												Inserat von <h:commandLink action="#{userView.showProfil(ads.memberid)}">
											<h:outputText value="#{ads.name} #{ads.last_name}" />
												</h:commandLink>
												<h:commandLink action="#{message.startMessage}" rendered="#{ads.memberid != user.id}">
													<h:graphicImage class="message"
														value="resources/images/message.png" alt="message" />
						
													<f:param name="startmessage" value="#{ads.memberid}" />
												</h:commandLink>
												<br />
												<h:outputText value=" Verdienst: #{ads.income} €" />
											</h:panelGroup>
						
						
											<h:panelGroup>
						
												<h:outputText value="#{ads.text}" />
												<br />
												<h:commandButton value="Detailansicht" action="#{advert.showAd(ads.id)}">
													<f:param name="resulttodetail" value="#{ads.memberid}" />
													<f:param name="advertid" value="#{ads.id}" />
												</h:commandButton>
						
												<br />
												<h:outputText value="Kategorie: #{ads.category}" />
										</h:panelGroup>
									</h:panelGrid>
								<h:panelGroup>	
								<h:commandButton value="ändern" action="#{advert.changeData}">
								 	<f:param name="ad_id" value="#{ads.id}" />
								</h:commandButton>
								<h:commandButton value="Entwurf löschen" action="#{advert.addelete(ads.id)}"/>
								</h:panelGroup>
							</h:panelGrid>
						</p:fieldset>
						 <p:fieldset legend="Aktiviert: #{ads.datum} - #{ads.zeitpunkt}" rendered="#{ads.ad_status == 1 and ads.ad_acc == 0 and ads.ad_buyerID == 0 and ads.ad_rate == 0}" >
					        <h:panelGrid columns="3" cellpadding="5" >
					            <h:graphicImage value="resources/images/sample.jpg" alt="image" />
								
									<h:panelGrid columns="2" border="1">
																			<h:panelGroup>
												Inserat von <h:commandLink action="#{userView.showProfil(ads.memberid)}">
											<h:outputText value="#{ads.name} #{ads.last_name}" />
												</h:commandLink>
												<h:commandLink action="#{message.startMessage}" rendered="#{ads.memberid != user.id}">
													<h:graphicImage class="message"
														value="resources/images/message.png" alt="message" />
						
													<f:param name="startmessage" value="#{ads.memberid}" />
												</h:commandLink>
												<br />
												<h:outputText value=" Verdienst: #{ads.income} €" />
											</h:panelGroup>
						
						
											<h:panelGroup>
						
												<h:outputText value="#{ads.text}" />
												<br />
												<h:commandButton value="Detailansicht" action="#{advert.showAd(ads.id)}">
													<f:param name="resulttodetail" value="#{ads.memberid}" />
													<f:param name="advertid" value="#{ads.id}" />
												</h:commandButton>
						
												<br />
												<h:outputText value="Kategorie: #{ads.category}" />
										</h:panelGroup>
										</h:panelGrid>
										<h:panelGroup>
								<h:commandButton value="ändern" action="#{advert.changeData}">
								 	<f:param name="ad_id" value="#{ads.id}" />
								</h:commandButton>
								<h:commandButton value="deaktivieren" action="#{advert.addeactive(ads.id)}"/>
								<h:commandButton value="löschen" action="#{advert.addelete(ads.id)}"/>
								</h:panelGroup>
							</h:panelGrid>
						</p:fieldset>
						
						<p:fieldset legend="Interesse: #{ads.datum} - #{ads.zeitpunkt}" rendered="#{ads.ad_status == 1 and ads.ad_acc == 0 and ads.ad_buyerID != 0 and ads.ad_rate == 0}" >
					        <h:panelGrid columns="3" cellpadding="5" >
					            <h:graphicImage value="resources/images/sample.jpg" alt="image" />
								
									<h:panelGrid columns="2" border="1">
												<h:panelGroup>
												Inserat von <h:commandLink action="#{userView.showProfil(ads.memberid)}">
											<h:outputText value="#{ads.name} #{ads.last_name}" />
												</h:commandLink>
												<h:commandLink action="#{message.startMessage}" rendered="#{ads.memberid != user.id}">
													<h:graphicImage class="message"
														value="resources/images/message.png" alt="message" />
						
													<f:param name="startmessage" value="#{ads.memberid}" />
												</h:commandLink>
												<br />
												<h:outputText value=" Verdienst: #{ads.income} €" />
											</h:panelGroup>
						
						
											<h:panelGroup>
						
												<h:outputText value="#{ads.text}" />
												<br />
												<h:commandButton value="Detailansicht" action="#{advert.showAd(ads.id)}">
													<f:param name="resulttodetail" value="#{ads.memberid}" />
													<f:param name="advertid" value="#{ads.id}" />
												</h:commandButton>
						
												<br />
												<h:outputText value="Kategorie: #{ads.category}" />
										</h:panelGroup>
									</h:panelGrid>
								<h:panelGroup>	
								<h:commandButton value="Interessent ablehnen" action="#{advert.buyerCancel(ads.id)}"/>
								<h:commandButton value="ablehnen und löschen" action="#{advert.adcanceldelete(ads.id)}"/>
								</h:panelGroup>
							</h:panelGrid>
						</p:fieldset>
						
						<p:fieldset legend="Angenommen: #{ads.datum} - #{ads.zeitpunkt}" rendered="#{ads.ad_status == 1 and ads.ad_acc == 1 and ads.ad_buyerID != 0  and ads.ad_rate == 0}" >
					        <h:panelGrid columns="3" cellpadding="5" >
					            <h:graphicImage value="resources/images/sample.jpg" alt="image" />
								
									<h:panelGrid columns="2" border="1">
												<h:panelGroup>
												Inserat von <h:commandLink action="#{userView.showProfil(ads.memberid)}">
											<h:outputText value="#{ads.name} #{ads.last_name}" />
												</h:commandLink>
												<h:commandLink action="#{message.startMessage}" rendered="#{ads.memberid != user.id}">
													<h:graphicImage class="message"
														value="resources/images/message.png" alt="message" />
						
													<f:param name="startmessage" value="#{ads.memberid}" />
												</h:commandLink>
												<br />
												<h:outputText value=" Verdienst: #{ads.income} €" />
											</h:panelGroup>
						
						
											<h:panelGroup>
						
												<h:outputText value="#{ads.text}" />
												<br />
												<h:commandButton value="Detailansicht" action="#{advert.showAd(ads.id)}">
													<f:param name="resulttodetail" value="#{ads.memberid}" />
													<f:param name="advertid" value="#{ads.id}" />
												</h:commandButton>
						
												<br />
												<h:outputText value="Kategorie: #{ads.category}" />
										</h:panelGroup>
									</h:panelGrid>
								<h:commandButton value="bewerten" action="#{advert.startrating(ads.ad_buyerID, ads.id, user.id, 2)}">
														<f:param name="resulttodetail" value="#{ads.memberid}" />
							<f:param name="advertid" value="#{ads.id}" />
								</h:commandButton>
							</h:panelGrid>
						</p:fieldset>
						
						<p:fieldset legend="Bewertet: #{ads.datum} - #{ads.zeitpunkt}" rendered="#{ads.ad_status == 1 and ads.ad_acc == 1 and ads.ad_buyerID != 0 and ads.ad_rate == 1}" >
					        <h:panelGrid columns="3" cellpadding="5" >
					            <h:graphicImage value="resources/images/sample.jpg" alt="image" />
								
									<h:panelGrid columns="2" border="1">
											<h:panelGroup>
												Inserat von <h:commandLink action="#{userView.showProfil(ads.memberid)}">
											<h:outputText value="#{ads.name} #{ads.last_name}" />
												</h:commandLink>
												<h:commandLink action="#{message.startMessage}" rendered="#{ads.memberid != user.id}">
													<h:graphicImage class="message"
														value="resources/images/message.png" alt="message" />
						
													<f:param name="startmessage" value="#{ads.memberid}" />
												</h:commandLink>
												<br />
												<h:outputText value=" Verdienst: #{ads.income} €" />
											</h:panelGroup>
						
						
											<h:panelGroup>
						
												<h:outputText value="#{ads.text}" />
												<br />
												<h:commandButton value="Detailansicht" action="#{advert.showAd(ads.id)}">
													<f:param name="resulttodetail" value="#{ads.memberid}" />
													<f:param name="advertid" value="#{ads.id}" />
												</h:commandButton>
						
												<br />
												<h:outputText value="Kategorie: #{ads.category}" />
										</h:panelGroup>
									</h:panelGrid>
							</h:panelGrid>
						</p:fieldset>
				<br />
				</ui:repeat> 	
				</p:tab>
				
				<p:tab title="Fremde Inserate" >
				
				<ui:repeat var="ads" value="#{advert.alladverts}">
				<p:fieldset legend="Interesse: #{ads.datum} - #{ads.zeitpunkt}" style="margin-bottom:20px" rendered="#{ads.ad_rate == 0 and ads.ad_acc == 0}">
				        <h:panelGrid columns="3" cellpadding="5">
				            <h:graphicImage value="resources/images/sample.jpg" alt="image" />
							
								<h:panelGrid columns="2" border="1">
												<h:panelGroup>
												Inserat von <h:commandLink action="#{userView.showProfil(ads.memberid)}">
											<h:outputText value="#{ads.name} #{ads.last_name}" />
												</h:commandLink>
												<h:commandLink action="#{message.startMessage}" rendered="#{ads.memberid != user.id}">
													<h:graphicImage class="message"
														value="resources/images/message.png" alt="message" />
						
													<f:param name="startmessage" value="#{ads.memberid}" />
												</h:commandLink>
												<br />
												<h:outputText value=" Verdienst: #{ads.income} €" />
											</h:panelGroup>
						
						
											<h:panelGroup>
						
												<h:outputText value="#{ads.text}" />
												<br />
												<h:commandButton value="Detailansicht" action="#{advert.showAd(ads.id)}">
													<f:param name="resulttodetail" value="#{ads.memberid}" />
													<f:param name="advertid" value="#{ads.id}" />
												</h:commandButton>
						
												<br />
												<h:outputText value="Kategorie: #{ads.category}" />
										</h:panelGroup>
								</h:panelGrid>
							
							<h:commandButton value="Anfrage zurückziehen" action="#{advert.adCancel(ads.id, ads.memberid)}"/>

						</h:panelGrid>
					</p:fieldset>
							  
				    <p:fieldset legend="Angenommen: #{ads.datum} - #{ads.zeitpunkt}" style="margin-bottom:20px" rendered="#{ads.ad_rate == 0 and ads.ad_acc == 1}">
				        <h:panelGrid columns="3" cellpadding="5">
				            <h:graphicImage value="resources/images/sample.jpg" alt="image" />
							
								<h:panelGrid columns="2" border="1">
												<h:panelGroup>
												Inserat von <h:commandLink action="#{userView.showProfil(ads.memberid)}">
											<h:outputText value="#{ads.name} #{ads.last_name}" />
												</h:commandLink>
												<h:commandLink action="#{message.startMessage}" rendered="#{ads.memberid != user.id}">
													<h:graphicImage class="message"
														value="resources/images/message.png" alt="message" />
						
													<f:param name="startmessage" value="#{ads.memberid}" />
												</h:commandLink>
												<br />
												<h:outputText value=" Verdienst: #{ads.income} €" />
											</h:panelGroup>
						
						
											<h:panelGroup>
						
												<h:outputText value="#{ads.text}" />
												<br />
												<h:commandButton value="Detailansicht" action="#{advert.showAd(ads.id)}">
													<f:param name="resulttodetail" value="#{ads.memberid}" />
													<f:param name="advertid" value="#{ads.id}" />
												</h:commandButton>
						
												<br />
												<h:outputText value="Kategorie: #{ads.category}" />
										</h:panelGroup>
								</h:panelGrid>
							#{ads.memberid} #{ads.ad_buyerID} #{user.id} #{ads.id} 
							<h:commandButton value="bewerten" action="#{advert.startrating(ads.ad_buyerID, ads.memberid, user.id, 1)}">
							<f:param name="resulttodetail" value="#{ads.memberid}" />
							<f:param name="advertid" value="#{ads.id}" />
							</h:commandButton>
						</h:panelGrid>
					</p:fieldset>
							  
					<p:fieldset legend="Bewertet: #{ads.datum} - #{ads.zeitpunkt}" style="margin-bottom:20px" rendered="#{ads.ad_rate == 1 and ads.ad_acc == 1}">
				        <h:panelGrid columns="3" cellpadding="5">
				            <h:graphicImage value="resources/images/sample.jpg" alt="image" />
							
								<h:panelGrid columns="2" border="1">
														<h:panelGroup>
												Inserat von <h:commandLink action="#{userView.showProfil(ads.memberid)}">
											<h:outputText value="#{ads.name} #{ads.last_name}" />
												</h:commandLink>
												<h:commandLink action="#{message.startMessage}" rendered="#{ads.memberid != user.id}">
													<h:graphicImage class="message"
														value="resources/images/message.png" alt="message" />
						
													<f:param name="startmessage" value="#{ads.memberid}" />
												</h:commandLink>
												<br />
												<h:outputText value=" Verdienst: #{ads.income} €" />
											</h:panelGroup>
						
						
											<h:panelGroup>
						
												<h:outputText value="#{ads.text}" />
												<br />
												<h:commandButton value="Detailansicht" action="#{advert.showAd(ads.id)}">
													<f:param name="resulttodetail" value="#{ads.memberid}" />
													<f:param name="advertid" value="#{ads.id}" />
												</h:commandButton>
						
												<br />
												<h:outputText value="Kategorie: #{ads.category}" />
										</h:panelGroup>
								</h:panelGrid>
						
						</h:panelGrid>
					</p:fieldset>		  
							  
							  
							  
			</ui:repeat> 
	
				</p:tab>
			</p:tabView>

        </h:form>  
        
</ui:define>
</ui:composition>



<!-- 

 		
						
						
					
						
						
						

 -->