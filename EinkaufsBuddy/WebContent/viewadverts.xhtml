<ui:composition template="template/mastersideboxadverts.xhtml"
 	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions">
    
<ui:define name="content">

        <h:form>  
	
		<p:remoteCommand action="#{advert.showAllOhneEvent}" autoRun="true" asnc="true" update="tabviewupdate"/>
		
		<p:confirmDialog global="true" showEffect="fade" hideEffect="explode">
			<p:commandButton value="Ja" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
			<p:commandButton value="Nein" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
		</p:confirmDialog>
		
			<p:tabView id="tabviewupdate" >
				<p:ajax event="tabChange" listener="#{advert.showAll}" update="tabviewupdate"/>
				
				<p:tab title="Eigene Inserate">
							    	
				    <ui:repeat var="ads" value="#{advert.alladverts}">
				
					    <p:fieldset legend="Entwurf: #{of:formatDate(ads.datum, 'dd.MM.yyyy')} - #{ads.zeitpunkt}" toggleable="true" toggleSpeed="500" rendered="#{ads.ad_status == 0 and ads.ad_acc == 0 and ads.ad_buyerID == 0 and ads.ad_rate == 0}">
					      				<table>
											<colgroup>
											    <col width="180px"/>
											    <col width="250px"/>
											    <col width="200px"/>
											</colgroup>
						
											<tr>
												<td align="center"><h:graphicImage style="width:7em; height:7em;" value="DisplayImage?Image_id=#{ads.memberid}"></h:graphicImage>
						 						</td>	
												<td><h:outputText value=" Einkaufsliste: #{ads.text}"/></td>
												<td><h3><h:outputText value=" Verdienst: #{ads.income} €" /></h3></td>
											</tr>
											
						
											
											<tr>
												<td align="center"><h:commandLink styleClass="profillinks" action="#{userView.showProfil(ads.memberid)}">
													<h:outputText styleClass="profillinktext" value="#{ads.name} #{ads.last_name}"/>
												</h:commandLink>
												<h:commandLink action="#{message.startMessage}" rendered="#{ads.memberid != user.id}">
													<h:graphicImage class="message"
														value="resources/images/message.png" alt="message" />
													<f:param name="startmessage" value="#{ads.memberid}" />
												</h:commandLink>
												</td>
												
												<td><h:outputText value="Entfernung: 0 km" /></td>
												<td><p:commandButton value="Detailansicht" action="#{advert.showAd2(ads.id)}">
													<f:param name="resulttodetail" value="#{ads.memberid}" />
													<f:param name="advertid" value="#{ads.id}" />
												</p:commandButton>
												</td>
												
												
											</tr>
											<tr>
												<td></td>
												<td><h:outputText value="Einkaufslimit: #{ads.limit} €"/> 
												</td>
												
												<td></td>
												
											</tr>
											<tr>
												<td></td>
												<td><h:outputText value="Kategorie: #{ads.category}" /></td>
												
												<td></td>
												
											</tr>
										</table>
										
								<h:panelGroup styleClass="adfunctionright" layout="block">	
								<p:commandButton value="ändern" action="#{advert.changeData}">
								 	<f:param name="ad_id" value="#{ads.id}" />
								</p:commandButton>
								<p:commandButton value="löschen" action="#{advert.addelete(ads.id)}">
										<p:confirm header="Confirmation" message="Bist du dir sicher?" icon="ui-icon-alert" />
								</p:commandButton>
								</h:panelGroup>
							
						</p:fieldset>
						 <p:fieldset legend="Aktiviert: #{of:formatDate(ads.datum, 'dd.MM.yyyy')} - #{ads.zeitpunkt}" toggleable="true" toggleSpeed="500" rendered="#{ads.ad_status == 1 and ads.ad_acc == 0 and ads.ad_buyerID == 0 and ads.ad_rate == 0}" >
					 		      				<table>
											<colgroup>
											    <col width="180px"/>
											    <col width="250px"/>
											    <col width="200px"/>
											</colgroup>
						
											<tr>
												<td align="center"><h:graphicImage style="width:7em; height:7em;" value="DisplayImage?Image_id=#{ads.memberid}"></h:graphicImage>
						 						</td>	
												<td><h:outputText value=" Einkaufsliste: #{ads.text}"/></td>
												<td><h3><h:outputText value=" Verdienst: #{ads.income} €" /></h3></td>
											</tr>
											
						
											
											<tr>
												<td align="center"><h:commandLink styleClass="profillinks" action="#{userView.showProfil(ads.memberid)}">
													<h:outputText styleClass="profillinktext"  value="#{ads.name} #{ads.last_name}"/>
												</h:commandLink>
												<h:commandLink action="#{message.startMessage}" rendered="#{ads.memberid != user.id}">
													<h:graphicImage class="message"
														value="resources/images/message.png" alt="message" />
													<f:param name="startmessage" value="#{ads.memberid}" />
												</h:commandLink>
												</td>
												
												<td><h:outputText value="Entfernung: 0 km" /></td>
												<td><p:commandButton value="Detailansicht" action="#{advert.showAd2(ads.id)}">
													<f:param name="resulttodetail" value="#{ads.memberid}" />
													<f:param name="advertid" value="#{ads.id}" />
												</p:commandButton>
												</td>
												
												
											</tr>
											<tr>
												<td></td>
												<td><h:outputText value="Einkaufslimit: #{ads.limit} €"/> 
												</td>
												
												<td></td>
												
											</tr>
											<tr>
												<td></td>
												<td><h:outputText value="Kategorie: #{ads.category}" /></td>
												
												<td></td>
												
											</tr>
										</table>
								<h:panelGroup styleClass="adfunctionright" layout="block">	
								
								<p:commandButton value="deaktivieren" action="#{advert.addeactive(ads.id)}"/>
								<p:commandButton value="ändern" action="#{advert.changeData}">
								 	<f:param name="ad_id" value="#{ads.id}" />
								</p:commandButton>
								<p:commandButton value="löschen" action="#{advert.addelete(ads.id)}">	
									<p:confirm header="Confirmation" message="Bist du dir sicher?" icon="ui-icon-alert" />
								</p:commandButton>
								</h:panelGroup>
							
						</p:fieldset>
						
						<p:fieldset legend="Interesse: #{of:formatDate(ads.datum, 'dd.MM.yyyy')} - #{ads.zeitpunkt}" toggleable="true" toggleSpeed="500" rendered="#{ads.ad_status == 1 and ads.ad_acc == 0 and ads.ad_buyerID != 0 and ads.ad_rate == 0}" >
					     		      				<table>
											<colgroup>
											    <col width="180px"/>
											    <col width="250px"/>
											    <col width="200px"/>
											</colgroup>
						
											<tr>
												<td align="center"><h:graphicImage style="width:7em; height:7em;" value="DisplayImage?Image_id=#{ads.memberid}"></h:graphicImage>
						 						</td>	
												<td><h:outputText value=" Einkaufsliste: #{ads.text}"/></td>
												<td><h3><h:outputText value=" Verdienst: #{ads.income} €" /></h3></td>
											</tr>
											
						
											
											<tr>
												<td align="center"><h:commandLink styleClass="profillinks" action="#{userView.showProfil(ads.memberid)}">
													<h:outputText styleClass="profillinktext"  value="#{ads.name} #{ads.last_name}"/>
												</h:commandLink>
												<h:commandLink action="#{message.startMessage}" rendered="#{ads.memberid != user.id}">
													<h:graphicImage class="message"
														value="resources/images/message.png" alt="message" />
													<f:param name="startmessage" value="#{ads.memberid}" />
												</h:commandLink>
												</td>
												
												<td><h:outputText value="Entfernung: 0 km" /></td>
												<td><p:commandButton value="Detailansicht" action="#{advert.showAd2(ads.id)}">
													<f:param name="resulttodetail" value="#{ads.memberid}" />
													<f:param name="advertid" value="#{ads.id}" />
												</p:commandButton>
												</td>
												
												
											</tr>
											<tr>
												<td></td>
												<td><h:outputText value="Einkaufslimit: #{ads.limit} €"/> 
												</td>
												
												<td></td>
												
											</tr>
											<tr>
												<td></td>
												<td><h:outputText value="Kategorie: #{ads.category}" /></td>
												
												<td></td>
												
											</tr>
										</table>
								<h:panelGroup styleClass="adfunctionright" layout="block">		
								<p:commandButton value="ablehnen" action="#{advert.buyerCancel(ads.id)}"/>
								<p:commandButton value="löschen" action="#{advert.adcanceldelete(ads.id)}">
									<p:confirm header="Confirmation" message="Bist du dir sicher?" icon="ui-icon-alert" />
								</p:commandButton>
								</h:panelGroup>
							
						</p:fieldset>
						
						<p:fieldset legend="Angenommen: #{of:formatDate(ads.datum, 'dd.MM.yyyy')} - #{ads.zeitpunkt}" toggleable="true" toggleSpeed="500" rendered="#{ads.ad_status == 1 and ads.ad_acc == 1 and ads.ad_buyerID != 0  and ads.ad_rate == 0}" >
					        		      				<table>
											<colgroup>
											    <col width="180px"/>
											    <col width="250px"/>
											    <col width="200px"/>
											</colgroup>
						
											<tr>
												<td align="center"><h:graphicImage style="width:7em; height:7em;" value="DisplayImage?Image_id=#{ads.memberid}"></h:graphicImage>
						 						</td>	
												<td><h:outputText value=" Einkaufsliste: #{ads.text}"/></td>
												<td><h3><h:outputText value=" Verdienst: #{ads.income} €" /></h3></td>
											</tr>
											
						
											
											<tr>
												<td align="center"><h:commandLink styleClass="profillinks" action="#{userView.showProfil(ads.memberid)}">
													<h:outputText styleClass="profillinktext"  value="#{ads.name} #{ads.last_name}"/>
												</h:commandLink>
												<h:commandLink action="#{message.startMessage}" rendered="#{ads.memberid != user.id}">
													<h:graphicImage class="message"
														value="resources/images/message.png" alt="message" />
													<f:param name="startmessage" value="#{ads.memberid}" />
												</h:commandLink>
												</td>
												
												<td><h:outputText value="Entfernung: 0 km" /></td>
												<td><p:commandButton value="Detailansicht" action="#{advert.showAd2(ads.id)}">
													<f:param name="resulttodetail" value="#{ads.memberid}" />
													<f:param name="advertid" value="#{ads.id}" />
												</p:commandButton>
												</td>
												
												
											</tr>
											<tr>
												<td></td>
												<td><h:outputText value="Einkaufslimit: #{ads.limit} €"/> 
												</td>
												
												<td></td>
												
											</tr>
											<tr>
												<td></td>
												<td><h:outputText value="Kategorie: #{ads.category}" /></td>
												
												<td></td>
												
											</tr>
										</table>
								<h:panelGroup styleClass="adfunctionright" layout="block">			
								<p:commandButton value="bewerten" action="#{advert.startrating(ads.ad_buyerID, ads.id, user.id, 2)}">
														<f:param name="resulttodetail" value="#{ads.memberid}" />
								<f:param name="advertid" value="#{ads.id}" />
								</p:commandButton>
							</h:panelGroup>
						</p:fieldset>
						
						<p:fieldset legend="Bewertet: #{of:formatDate(ads.datum, 'dd.MM.yyyy')} - #{ads.zeitpunkt}" toggleable="true" toggleSpeed="500" rendered="#{ads.ad_status == 1 and ads.ad_acc == 1 and ads.ad_buyerID != 0 and ads.ad_rate == 1}" >
		      				<table>
											<colgroup>
											    <col width="180px"/>
											    <col width="250px"/>
											    <col width="200px"/>
											</colgroup>
						
											<tr>
												<td align="center"><h:graphicImage style="width:7em; height:7em;" value="DisplayImage?Image_id=#{ads.memberid}"></h:graphicImage>
						 						</td>	
												<td><h:outputText value=" Einkaufsliste: #{ads.text}"/></td>
												<td><h3><h:outputText value=" Verdienst: #{ads.income} €" /></h3></td>
											</tr>
											
						
											
											<tr>
												<td align="center"><h:commandLink styleClass="profillinks" action="#{userView.showProfil(ads.memberid)}">
													<h:outputText styleClass="profillinktext"  value="#{ads.name} #{ads.last_name}"/>
												</h:commandLink>
												<h:commandLink action="#{message.startMessage}" rendered="#{ads.memberid != user.id}">
													<h:graphicImage class="message"
														value="resources/images/message.png" alt="message" />
													<f:param name="startmessage" value="#{ads.memberid}" />
												</h:commandLink>
												</td>
												
												<td><h:outputText value="Entfernung: 0 km" /></td>
												<td><p:commandButton value="Detailansicht" action="#{advert.showAd2(ads.id)}">
													<f:param name="resulttodetail" value="#{ads.memberid}" />
													<f:param name="advertid" value="#{ads.id}" />
												</p:commandButton>
												</td>
												
												
											</tr>
											<tr>
												<td></td>
												<td><h:outputText value="Einkaufslimit: #{ads.limit} €"/> 
												</td>
												
												<td></td>
												
											</tr>
											<tr>
												<td></td>
												<td><h:outputText value="Kategorie: #{ads.category}" /></td>
												
												<td></td>
												
											</tr>
										</table>
						</p:fieldset>
				<br />
				</ui:repeat> 	
				</p:tab>
				
				<p:tab title="Fremde Inserate" >
				
				<ui:repeat var="ads" value="#{advert.alladverts}">
				<p:fieldset legend="Interesse: #{of:formatDate(ads.datum, 'dd.MM.yyyy')} - #{ads.zeitpunkt}" style="margin-bottom:20px" toggleable="true" toggleSpeed="500" rendered="#{ads.ad_rate == 0 and ads.ad_acc == 0}">
				       		      				<table>
											<colgroup>
											    <col width="180px"/>
											    <col width="250px"/>
											    <col width="200px"/>
											</colgroup>
						
											<tr>
												<td align="center"><h:graphicImage style="width:7em; height:7em;" value="DisplayImage?Image_id=#{ads.memberid}"></h:graphicImage>
						 						</td>	
												<td><h:outputText value=" Einkaufsliste: #{ads.text}"/></td>
												<td><h3><h:outputText value=" Verdienst: #{ads.income} €" /></h3></td>
											</tr>
											
						
											
											<tr>
												<td align="center"><h:commandLink styleClass="profillinks" action="#{userView.showProfil(ads.memberid)}">
													<h:outputText styleClass="profillinktext"  value="#{ads.name} #{ads.last_name}"/>
												</h:commandLink>
												<h:commandLink action="#{message.startMessage}" rendered="#{ads.memberid != user.id}">
													<h:graphicImage class="message"
														value="resources/images/message.png" alt="message" />
													<f:param name="startmessage" value="#{ads.memberid}" />
												</h:commandLink>
												</td>
												
												<td><h:outputText value="Entfernung: #{ads.distance} km" /></td>
												<td><p:commandButton value="Detailansicht" action="#{advert.showAd2(ads.id)}">
													<f:param name="resulttodetail" value="#{ads.memberid}" />
													<f:param name="advertid" value="#{ads.id}" />
												</p:commandButton>
												</td>
												
												
											</tr>
											<tr>
												<td></td>
												<td><h:outputText value="Einkaufslimit: #{ads.limit} €"/> 
												</td>
												
												<td></td>
												
											</tr>
											<tr>
												<td></td>
												<td><h:outputText value="Kategorie: #{ads.category}" /></td>
												
												<td></td>
												
											</tr>
										</table>
							<h:panelGroup styleClass="adfunctionright" layout="block">	
							<p:commandButton value="zurückziehen" action="#{advert.adCancel(ads.id, ads.memberid)}"/>
							</h:panelGroup>
					
					</p:fieldset>
							  
				    <p:fieldset legend="Angenommen: #{of:formatDate(ads.datum, 'dd.MM.yyyy')} - #{ads.zeitpunkt}" style="margin-bottom:20px" toggleable="true" toggleSpeed="500" rendered="#{ads.ad_rate == 0 and ads.ad_acc == 1}">
				      		      				<table>
											<colgroup>
											    <col width="180px"/>
											    <col width="250px"/>
											    <col width="200px"/>
											</colgroup>
						
											<tr>
												<td align="center"><h:graphicImage style="width:7em; height:7em;" value="DisplayImage?Image_id=#{ads.memberid}"></h:graphicImage>
						 						</td>	
												<td><h:outputText value=" Einkaufsliste: #{ads.text}"/></td>
												<td><h3><h:outputText value=" Verdienst: #{ads.income} €" /></h3></td>
											</tr>
											
						
											
											<tr>
												<td align="center"><h:commandLink styleClass="profillinks" action="#{userView.showProfil(ads.memberid)}">
													<h:outputText styleClass="profillinktext"  value="#{ads.name} #{ads.last_name}"/>
												</h:commandLink>
												<h:commandLink action="#{message.startMessage}" rendered="#{ads.memberid != user.id}">
													<h:graphicImage class="message"
														value="resources/images/message.png" alt="message" />
													<f:param name="startmessage" value="#{ads.memberid}" />
												</h:commandLink>
												</td>
												
												<td><h:outputText value="Entfernung: #{ads.distance} km" /></td>
												<td><p:commandButton value="Detailansicht" action="#{advert.showAd2(ads.id)}">
													<f:param name="resulttodetail" value="#{ads.memberid}" />
													<f:param name="advertid" value="#{ads.id}" />
												</p:commandButton>
												</td>
												
												
											</tr>
											<tr>
												<td></td>
												<td><h:outputText value="Einkaufslimit: #{ads.limit} €"/> 
												</td>
												
												<td></td>
												
											</tr>
											<tr>
												<td></td>
												<td><h:outputText value="Kategorie: #{ads.category}" /></td>
												
												<td></td>
												
											</tr>
										</table>
							#{ads.memberid} #{ads.ad_buyerID} #{user.id} #{ads.id} 
							<h:panelGroup styleClass="adfunctionright" layout="block">	
							<p:commandButton value="bewerten" action="#{advert.startrating(ads.ad_buyerID, ads.memberid, user.id, 1)}">
							<f:param name="resulttodetail" value="#{ads.memberid}" />
							<f:param name="advertid" value="#{ads.id}" />
							</p:commandButton>
							</h:panelGroup>
					</p:fieldset>
							  
					<p:fieldset legend="Bewertet: #{of:formatDate(ads.datum, 'dd.MM.yyyy')} - #{ads.zeitpunkt}" style="margin-bottom:20px" toggleable="true" toggleSpeed="500" rendered="#{ads.ad_rate == 1 and ads.ad_acc == 1}">
				       		      				<table>
											<colgroup>
											    <col width="180px"/>
											    <col width="250px"/>
											    <col width="200px"/>
											</colgroup>
						
											<tr>
												<td align="center"><h:graphicImage style="width:7em; height:7em;" value="DisplayImage?Image_id=#{ads.memberid}"></h:graphicImage>
						 						</td>	
												<td><h:outputText value=" Einkaufsliste: #{ads.text}"/></td>
												<td><h3><h:outputText value=" Verdienst: #{ads.income} €" /></h3></td>
											</tr>
											
						
											
											<tr>
												<td align="center"><h:commandLink styleClass="profillinks" action="#{userView.showProfil(ads.memberid)}">
													<h:outputText styleClass="profillinktext" value="#{ads.name} #{ads.last_name}"/>
												</h:commandLink>
												<h:commandLink action="#{message.startMessage}" rendered="#{ads.memberid != user.id}">
													<h:graphicImage class="message"
														value="resources/images/message.png" alt="message" />
													<f:param name="startmessage" value="#{ads.memberid}" />
												</h:commandLink>
												</td>
												
												<td><h:outputText value="Entfernung: #{ads.distance} km" /></td>
												<td><p:commandButton value="Detailansicht" action="#{advert.showAd2(ads.id)}">
													<f:param name="resulttodetail" value="#{ads.memberid}" />
													<f:param name="advertid" value="#{ads.id}" />
												</p:commandButton>
												</td>
												
												
											</tr>
											<tr>
												<td></td>
												<td><h:outputText value="Einkaufslimit: #{ads.limit} €"/> 
												</td>
												
												<td></td>
												
											</tr>
											<tr>
												<td></td>
												<td><h:outputText value="Kategorie: #{ads.category}" /></td>
												
												<td></td>
												
											</tr>
										</table>
					</p:fieldset>		  
							  
							  
							  
			</ui:repeat> 
	
				</p:tab>
			</p:tabView>

        </h:form>  
        
</ui:define>
</ui:composition>



<!-- 

 		
						
						
					
						
						
						

 -->