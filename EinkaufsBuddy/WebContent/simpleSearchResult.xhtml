<ui:composition template="template/mastersidebox.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions">

	<ui:define name="content">
	<h:form>
	<p:panel>
	  	<f:facet name="header" >
	  	<p:outputLabel value="Es wurden insgesamt #{simpleSearch.summeAds} passende Inserate gefunden" />
       		<h:panelGroup styleClass="ButtonHeaderSimple" layout="block">
       		<h:outputText  value="Sortieren: "/>
	        	<p:commandButton value="Datum" action="#{simpleSearch.sortByDate}" />
	        	<p:commandButton value="Entfernung" action="#{simpleSearch.sortByDistance}" />
   			</h:panelGroup>
		</f:facet>
	
 		

    <ui:repeat var="ads" value="#{simpleSearch.advertList}">
    <p:fieldset legend=" #{of:formatDate(ads.datum, 'dd.MM.yyyy')} - #{ads.zeitpunkt}" id="default" style="margin-bottom:20px" toggleable="true" toggleSpeed="500">
			
				<table>
					<colgroup>
					    <col width="180px"/>
					    <col width="250px"/>
					    <col width="200px"/>
					</colgroup>

					<tr>
						<td align="center"><p:graphicImage value="/resources/images/sample.jpg" width="72" height="72">
 						</p:graphicImage>
 						</td>	
						<td><h:outputText value=" Einkaufsliste: #{ads.text}"/></td>
						<td><h3><h:outputText value=" Verdienst: #{ads.income} €" /></h3></td>
					</tr>
					

					
					<tr>
						<td align="center"><h:commandLink action="#{userView.showProfil(ads.memberid)}">
							<h:outputText value="#{ads.name} #{ads.last_name}"/>
						</h:commandLink>
						<h:commandLink action="#{message.startMessage}" rendered="#{ads.memberid != user.id}">
							<h:graphicImage class="message"
								value="resources/images/message.png" alt="message" />
							<f:param name="startmessage" value="#{ads.memberid}" />
						</h:commandLink>
						</td>
						
						<td><h:outputText value="Entfernung: #{ads.distance} km" /></td>
						<td><h:commandButton value="Detailansicht" action="#{advert.showAd(ads.id, ads.distance)}">
							<f:param name="resulttodetail" value="#{ads.memberid}" />
							<f:param name="advertid" value="#{ads.id}" />
						</h:commandButton>
						</td>
						
						
					</tr>
					<tr>
						<td></td>
						<td><h:outputText value="Einkaufslimit: #{ads.limit} €"/> 
						</td>
						
						<td></td>
						
					</tr>
					<tr>
						<td></td>
						<td><h:outputText value="Kategorie: #{ads.category}" /></td>
						
						<td></td>
						
					</tr>
				</table>
		
			  </p:fieldset>
		</ui:repeat> 

</p:panel>
	</h:form>
	</ui:define>

</ui:composition>
