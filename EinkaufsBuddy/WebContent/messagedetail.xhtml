<ui:composition template="template/master.xhtml"
 	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
    
	<ui:define name="content">
		<h1>Das ist der Nachrichtenverlauf mit <h:outputText value="#{message.ms_senderId}"/> </h1>
		
		
		<h:form>
		
		
		<h:panelGrid >
			<h:panelGroup>
				<ui:repeat var="messagedetails" value="#{message.messagedetails}">
						<h:outputText styleClass="rightmessage" value="#{messagedetails.ms_receiverFirstName} " rendered="#{messagedetails.ms_senderId == user.id}"/>
						<h:outputText styleClass="leftmessage" value="#{messagedetails.ms_receiverFirstName} " rendered="#{messagedetails.ms_senderId != user.id}"/>
						<h:outputText styleClass="rightmessage" value="#{messagedetails.ms_receiverLastName} " rendered="#{messagedetails.ms_senderId == user.id}"/>
						<h:outputText styleClass="leftmessage" value="#{messagedetails.ms_receiverLastName} " rendered="#{messagedetails.ms_senderId != user.id}"/>
						<h:outputText styleClass="rightmessage" value="#{messagedetails.ms_time} " rendered="#{messagedetails.ms_senderId == user.id}"/>
						<h:outputText styleClass="leftmessage" value="#{messagedetails.ms_time} " rendered="#{messagedetails.ms_senderId != user.id}"/>
						
					<br/>
						<h:outputText styleClass="rightmessage" value="#{messagedetails.ms_text}" rendered="#{messagedetails.ms_senderId == user.id}"/>
						<h:outputText styleClass="leftmessage" value="#{messagedetails.ms_text}" rendered="#{messagedetails.ms_senderId != user.id}"/>
					<br/>
					<br/>	
				</ui:repeat>
			</h:panelGroup>			
		</h:panelGrid>
			
			<h:inputTextarea binding="#{messagetext}"/>
			
			<h:commandButton value="senden" action="#{message.writeMessage(messagetext.value)}">
				 <f:param name="empfaenger" value="#{message.ms_senderId}" />
			</h:commandButton>
		</h:form>

	</ui:define>
  
</ui:composition>
