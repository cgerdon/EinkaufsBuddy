<ui:composition template="template/master.xhtml"
 	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
    
	<ui:define name="content">
		<h1>Das ist der Nachrichtenverlauf mit <h:outputText value="#{message.ms_senderId}"/> </h1>
		
		
		<h:form>
	
			
				<p:dataScroller  id="messagerepeat" var="messagedetails" value="#{message.messagedetails}" chunkSize="10" mode="inline" scrollHeight="500">
						<h:panelGroup styleClass="rightmessage" layout="block" rendered="#{messagedetails.ms_senderId == user.id}">
							<h:outputText value="#{messagedetails.ms_receiverFirstName} "/>
							<h:outputText value="#{messagedetails.ms_receiverLastName} " />
							<h:outputText value="#{messagedetails.ms_time} "/>
						<br/>				
							<h:outputText value="#{messagedetails.ms_text}"/>
						</h:panelGroup>
						
						<h:panelGroup styleClass="leftmessage" layout="block" rendered="#{messagedetails.ms_senderId != user.id}">
							<h:outputText value="#{messagedetails.ms_receiverFirstName} "/>
							<h:outputText value="#{messagedetails.ms_receiverLastName} " />
							<h:outputText value="#{messagedetails.ms_time} "/>
						<br/>				
							<h:outputText value="#{messagedetails.ms_text}"/>
						</h:panelGroup>
					<br/>	
				</p:dataScroller>
		

			<p:inputTextarea value="#{message.ms_text}"/>
			<p:commandButton value="senden" actionListener="#{message.writeMessage}" update="messagerepeat" >
			
			</p:commandButton>

		</h:form>

	</ui:define>
  
</ui:composition>

<!--	
<h:panelGroup id="messagerepeat" >


ui:repeat

styleClass="chat-window" layout="block"


		<p:commandButton value="senden" actionListener="#{message.writeMessage}" process="@this,messagerepeat" update="messagerepeat" >
			
			</p:commandButton>

	
	 	<p:poll interval="3" listener="#{message.reloadMessage(message.ms_senderId)}" update="messagerepeat" />
	 	
id="messagedetails"

 <f:param name="empfaenger" value="#{message.ms_senderId}" />
<p:commandButton value="senden" update="messagerepeat">
	<h:inputTextarea binding="#{messagetext}"/>
			
	 	<h:commandButton value="senden" action="#{message.writeMessage(messagetext.value)}">
				 <f:param name="empfaenger" value="#{message.ms_senderId}" />
			</h:commandButton>	
			-->